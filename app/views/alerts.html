<div class="row row-pagination">
    <div class="pull-left">
        <button class="btn btn-primary btn-embossed"
                ng-click="addAlert()">
            <span class="glyphicon glyphicon-plus"></span> Ajouter une nouvelle alerte
        </button>
    </div>
    <pagination total-items="pagination.total_count"
                ng-model="pagination.current_page"
                items-per-page="pagination.limit"
                ng-show="pagination.total_pages > 1"
                max-size="10"
                class="pull-right"></pagination>
</div>

<div class="row">
    <div class="col-sm-4">
        <div class="list-group">
            <a href="" ng-repeat="alert in alerts | orderBy : '-id'"
               class="list-group-item"
               ng-class="{ 'list-group-success' : alert.id > seqNumber,
               'list-group-default' : alert.id <= seqNumber,
               'active' : activeAlert.id === alert.id}"
               ng-click="showAlert(alert)">
                <h4 class="list-group-item-heading">{{alert.title}}</h4>

                <p>Par {{alert.user_id | toReadableUser}}</p>

                <p>{{alert.price | currency}}</p>

                <p class="list-group-item-text">{{alert.content}}</p>
            </a>
        </div>
    </div>
    <div class="col-sm-8" ng-show="activeAlert">
        <div class="panel panel-default" ng-if="!editable">
            <div class="panel-heading">
                <h2 class="panel-title">
                    {{activeAlert.title}}
                    <small> - par {{activeAlert.user_id | toReadableUser}}</small>
                </h2>
            </div>
            <div class="panel-body">
                <p>{{activeAlert.price | currency}}</p>

                <p>{{activeAlert.content}}</p>
            </div>
            <div class="panel-footer" ng-if="activeAlert.user_id === authUser.id">
                <button class="btn btn-primary btn-embossed" ng-click="editAlert()">
                    Editer
                </button>
                <button class="btn btn-danger btn-embossed" ng-click="deleteAlert(activeAlert)">
                    Supprimer
                </button>
            </div>
        </div>

        <form name="alertForm" role="form" ng-submit="saveAlert(activeAlert)" ng-if="editable" animate="error">
            <alert type="danger" ng-show="error">Veuillez corriger vos erreurs</alert>
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h2 class="panel-title">
                        {{activeAlert.id ? "Editer l'alerte" : "Nouvelle alerte"}}
                    </h2>
                </div>

                <div class="panel-body">
                    <div class="form-group">
                        <label for="title">Titre</label>
                        <input type="text" class="form-control" id="title" name="title" placeholder="titre"
                               ng-model="activeAlert.title"
                               required max-length-title/>
                    </div>
                    <div class="form-group">
                        <label for="price">Prix</label>
                        <input type="number" class="form-control" id="price" placeholder="prix"
                               ng-model="activeAlert.price" min="0" required>
                    </div>
                    <div class="form-group">
                        <label for="content">Contenu</label>
                        <textarea class="form-control" id="content" name="content" placeholder="content"
                                  ng-model="activeAlert.content" rows="6"></textarea>
                    </div>
                    <div class="form-group" style="margin-bottom: 0;">
                        <button type="submit" class="btn btn-success btn-embossed"
                                ng-disabled="alertForm.$invalid || loading"
                                ladda="loading" data-style="zoom-out">
                            Enregistrer
                        </button>
                        <button type="button" ng-click="cancelAlert()"
                                class="btn btn-default btn-embossed">
                            Annuler
                        </button>
                    </div>
                </div>
            </div>
        </form>
    </div>
</div>
</div>